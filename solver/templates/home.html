{% extends "base.html" %}

{% block content %}
  <div class="grid board">
    
    {% for row in data.pattern %}
    {% set outer_loop = loop %}
    <div class="grid-row">
      {% for val in row %}
      {% set edges = data.edge_pattern[outer_loop.index0][loop.index0] %}
      <div class="grid-cell 
        {% if val == 'r' %} red 
        {% else %} black 
        {% endif %}
        
        {% if edges[0] == '1' %} up {% endif %}
        {% if edges[1] == '1' %} left {% endif %}
        {% if edges[2] == '1' %} right {% endif %}
        {% if edges[3] == '1' %} down {% endif %}
        ">
      </div>
      {% endfor %}
    </div>
    {% endfor %}
  </div>
  
  <h3>Data</h3>
  <div class="data">
    Red: {{ data.red_count }}
    Black: {{ data.black_count }}
    Total: {{ data.total_count }}
  </div>
  
  <h3>Pieces</h3>
  {% for piece in pieces %}
  <div class="grid piece">
    {% for row in piece['grid'] %}
    <div class="grid-row">
      {% for cell in row %}
      <div class="grid-cell 
        {% if cell == None %} white 
        {% elif cell['color'] == 'r' %} red 
        {% else %} black 
        {% endif %}
        ">
      </div>
      {% endfor %}
    </div>
    {% endfor %}
  </div>
  {% endfor %}
{% endblock %}

