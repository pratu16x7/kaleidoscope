{% macro grid_pattern(grid, classname) -%}
  <div class="grid {{classname}}">
    {% for row in grid %}
    <div class="grid-row">
      {% for cell in row %}
      <div class="grid-cell 
        {% if cell == None %} white 
        {% elif cell['color'] == 'r' %} red 
        {% else %} black 
        {% endif %}
        
        {% if cell %}
          {% if cell['edges'][0] == '1' %} up {% endif %}
          {% if cell['edges'][1] == '1' %} left {% endif %}
          {% if cell['edges'][2] == '1' %} down {% endif %}
          {% if cell['edges'][3] == '1' %} right {% endif %}
        {% endif %}
        "> 
        {% if cell.rel_coord is defined %}
          {{ cell['rel_coord'] }}
        {% else %}
          {{ cell['coord'] }}
        {% endif %}
      </div>
      {% endfor %}
    </div>
    {% endfor %}
  </div>
{%- endmacro %}

{% macro piece_pattern(piece, orient) -%}
  {{ grid_pattern(get_piece(piece, orient)['grid'], 'piece') }}
{%- endmacro %}

{% macro piece_info(piece) -%}
  <div>
    piece
  </div>
{%- endmacro %}

{% macro move(coord, piece, orient, hole_id) -%}
  <div>
    {{ piece_pattern(piece, orient) }}
    {{ coord }} {{ piece }} {{ orient }} {{ hole_id }}
  </div>
{%- endmacro %}

{% macro move_data(coord, piece, orient, hole_id, possible_moves) -%}
  <div>
    {{ move(coord, piece, orient, hole_id) }}
    {% for move in possible_moves %}
        {{ move }}
    {% endfor %}
  </div>
{%- endmacro %}

